<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>3D 욕실 시안 접수 (카톡 전송)</title>
  <meta name="description" content="욕실 정보 입력 → 요약 자동 생성 → 복사 후 카톡 전송" />
  <style>
    :root { --bg:#0b0e12; --text:#e9edf5; --muted:#aeb8c9; --accent:#6ea8fe; --accent2:#9dd6ff; }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;
      background: radial-gradient(1200px 800px at 30% -10%, #1a2746 0%, var(--bg) 55%) fixed;
      color:var(--text);
    }
    .wrap{max-width:980px;margin:0 auto;padding:18px}
    .brand{display:flex;gap:14px;align-items:center;padding-top:18px}
    .dot{width:14px;height:14px;border-radius:999px;background:linear-gradient(180deg,var(--accent),var(--accent2))}
    h1{margin:0;font-size:22px;letter-spacing:-.2px}
    .sub{margin:6px 0 0;color:var(--muted);line-height:1.45}
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.08);
      border-radius:18px;
      padding:18px;
      margin:12px 0;
      box-shadow: 0 12px 28px rgba(0,0,0,.25);
      backdrop-filter: blur(8px);
    }
    
    .titleRow{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
    h2{margin:0;font-size:18px}
    h3{margin:0 0 10px; font-size:15px; color:#dfe7ff}
    .tiny{font-size:12px;color:var(--muted);line-height:1.5}
    .muted{color:var(--muted)}
    .chip{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color:var(--text);
      padding:8px 10px;border-radius:999px;cursor:pointer;
      font-weight:800;font-size:12px;
    }
    .notice{
      border:1px dashed rgba(255,255,255,.18);
      border-radius:14px;
      background: rgba(110,168,254,.08);
      padding:12px 14px;
    }
    .notice h3{margin:0 0 8px;font-size:14px;color:#dfe7ff}
    .notice ul{margin:0;padding-left:18px;color:#d6deef}
    .notice li{margin:6px 0;line-height:1.55}
    .checkline{display:flex;gap:10px;align-items:flex-start;color:var(--muted);line-height:1.5;margin-top:10px}
    .checkline input{margin-top:3px}
    .grid2{display:grid;grid-template-columns:1fr;gap:12px}
    .grid3{display:grid;grid-template-columns:1fr;gap:12px}
    @media (min-width:760px){ .grid2{grid-template-columns:1fr 1fr} .grid3{grid-template-columns:1fr 1fr 1fr} }
    .field{display:flex;flex-direction:column;gap:6px;margin:10px 0}
    label{font-size:13px;color:#d5dcf0}
    input,select,textarea{
      width:100%;
      background: rgba(10,13,18,.55);
      border:1px solid rgba(255,255,255,.10);
      color:var(--text);
      border-radius:12px;
      padding:11px 12px;
      outline:none;
    }
    textarea{resize:vertical; min-height:64px}
    input:focus,select:focus,textarea:focus{border-color: rgba(110,168,254,.55); box-shadow: 0 0 0 3px rgba(110,168,254,.15)}

    .seg{border:1px solid rgba(255,255,255,.10); border-radius:16px; background: rgba(10,13,18,.30); padding:12px 14px; margin:12px 0}

    .pillGrid{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}
    .pill{
      display:inline-flex;gap:8px;align-items:center;
      padding:9px 11px;border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(10,13,18,.35);
      color:#dfe7ff;font-size:13px;
      user-select:none;
    }
    .pill input{margin:0}

    .stickyBar{
      position: sticky;
      bottom: 10px;
      display:flex;gap:10px;flex-wrap:wrap;
      padding:10px;
      border-radius:16px;
      background: rgba(18,23,35,.92);
      border:1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 40px rgba(0,0,0,.35);
      margin-top:12px;
      z-index: 10;
    }
    button{
      appearance:none;
      border:1px solid rgba(255,255,255,.12);
      padding:12px 14px;
      border-radius:14px;
      cursor:pointer;
      font-weight:900;
    }
    .primary{
      background: linear-gradient(180deg, rgba(110,168,254,.95), rgba(110,168,254,.75));
      color:#07101f;
      flex: 1 1 220px;
    }
    .secondary{
      background: rgba(255,255,255,.06);
      color:var(--text);
      font-weight:850;
    }
    .preview{
      margin-top:12px;
      border:1px solid rgba(255,255,255,.10);
      border-radius:16px;
      background: rgba(10,13,18,.30);
      padding:12px 14px;
    }
    .preview pre{
      margin:10px 0 0;
      white-space:pre-wrap;
      word-break:break-word;
      background: rgba(10,13,18,.55);
      border:1px solid rgba(255,255,255,.10);
      padding:10px 12px;
      border-radius:12px;
      color:#dfe7ff;
      font-size:12.5px;
      line-height:1.55;
    }
  </style>
</head>
<body>
  <header class="wrap">
    <div class="brand">
      <div class="dot"></div>
      <div>
        <h1>3D 욕실 시안 접수</h1>
        <p class="sub">입력 → <b>요약 자동 생성</b> → <b>복사 후 카톡 전송</b> (카톡이 접수입니다)</p>
      </div>
    </div>
  </header>

  <main class="wrap">

    <section class="card">
      <div class="titleRow">
        <h2>안내사항</h2>
        <button class="chip" type="button" id="toggleNotice" aria-controls="noticeBox" aria-expanded="true">접기</button>
      </div>

      <div class="notice" id="noticeBox">
        <h3>[3D 시안 제작 안내]</h3>
        <ul>
          <li>3D 시안은 <b>실제 시공 가능한 구조/비례</b>를 기준으로 제작됩니다.</li>
          <li>제조사·각도·조명·질감 차이로 <b>실물과 100% 동일 표현은 불가</b>합니다.</li>
          <li>디자인/컬러톤/배치/분위기 참고용이며, 최종 결과는 현장 조건에 따라 달라질 수 있습니다.</li>
        </ul>
      </div>

      <div class="checkline">
        <input id="ack" type="checkbox" />
        <label for="ack">위 안내사항을 확인했고, 참고용 시안임을 이해했습니다.</label>
      </div>
    </section>

    <section class="card">
      <h2>기본 정보</h2>
      <div class="grid2">
        <div class="field">
          <label for="clientType">접수자</label>
          <select id="clientType">
            <option value="">선택</option>
            <option>소비자(고객)</option>
            <option>인테리어/시공업자</option>
            <option>설계/디자이너</option>
            <option>기타</option>
          </select>
        </div>
        <div class="field">
          <label for="siteName">현장명(선택)</label>
          <input id="siteName" placeholder="예: 하남 ○○아파트 101동" />
        </div>
        <div class="field">
          <label for="name">성함</label>
          <input id="name" placeholder="홍길동" />
        </div>
        <div class="field">
          <label for="phone">연락처</label>
          <input id="phone" placeholder="010-0000-0000" inputmode="tel" />
        </div>
      </div>

      <div class="seg">
        <h3>치수 (바닥 기준)</h3>
        <div class="grid3">
          <div class="field"><label for="w">가로(mm)</label><input id="w" type="number" min="800" max="5000" step="1" /></div>
          <div class="field"><label for="d">세로(mm)</label><input id="d" type="number" min="800" max="5000" step="1" /></div>
          <div class="field"><label for="h">천장 높이(mm)</label><input id="h" type="number" min="1800" max="3000" step="1" /></div>
        </div>
      </div>

      <div class="seg">
        <h3>배치 선택</h3>
        <p class="tiny">기준: <b>정면을 바라봤을 때</b></p>

        <div class="grid3">
          <div class="field">
            <label>세면대 위치</label>
            <div class="pillGrid">
              <label class="pill"><input type="radio" name="sinkPos" value="정면">정면</label>
              <label class="pill"><input type="radio" name="sinkPos" value="정면-왼쪽">정면-왼쪽</label>
              <label class="pill"><input type="radio" name="sinkPos" value="정면-오른쪽">정면-오른쪽</label>
            </div>
            <input id="sinkPosNote" placeholder="추가 설명(선택) 예: 정면 중앙에 가깝게" />
          </div>

          <div class="field">
            <label>변기 위치</label>
            <div class="pillGrid">
              <label class="pill"><input type="radio" name="toiletPos" value="정면">정면</label>
              <label class="pill"><input type="radio" name="toiletPos" value="정면-왼쪽">정면-왼쪽</label>
              <label class="pill"><input type="radio" name="toiletPos" value="정면-오른쪽">정면-오른쪽</label>
            </div>
            <input id="toiletPosNote" placeholder="추가 설명(선택)" />
          </div>

          <div class="field">
            <label>샤워존/욕조 위치</label>
            <div class="pillGrid">
              <label class="pill"><input type="radio" name="showerWhere" value="정면">정면</label>
              <label class="pill"><input type="radio" name="showerWhere" value="정면-왼쪽">정면-왼쪽</label>
              <label class="pill"><input type="radio" name="showerWhere" value="정면-오른쪽">정면-오른쪽</label>
            </div>
            <div class="field" style="margin:10px 0 0">
              <label for="showerType">종류</label>
              <select id="showerType">
                <option value="">선택</option>
                <option>샤워</option>
                <option>욕조</option>
                <option>없음</option>
              </select>
            </div>
            <input id="showerNote" placeholder="추가 설명(선택) 예: 샤워부스/커튼 등" />
          </div>
        </div>

        <div class="grid2">
          <div class="field">
            <label for="doorPos">문 위치(선택)</label>
            <select id="doorPos">
              <option value="">선택</option>
              <option>정면</option>
              <option>좌측</option>
              <option>우측</option>
              <option>후면</option>
              <option>정면-좌측</option>
              <option>정면-우측</option>
            </select>
          </div>
          <div class="field">
            <label for="layoutNote">배치 전체 추가 설명(선택)</label>
            <input id="layoutNote" placeholder="예: 세면대/변기 위치는 현장 그대로 유지" />
          </div>
        </div>
      </div>

      <div class="seg">
        <h3>조적벽 / 파티션</h3>
        <div class="grid2">
          <div class="field">
            <label for="partitionType">종류</label>
            <select id="partitionType">
              <option value="">선택</option>
              <option>없음</option>
              <option>타일 조적 파티션</option>
              <option>유리 파티션</option>
              <option>타일 + 유리</option>
              <option>미정(추천 요청)</option>
            </select>
          </div>
          <div class="field">
            <label for="partitionWhere">위치(선택)</label>
            <input id="partitionWhere" placeholder="예: 샤워존과 세면대 사이 / 변기 옆 등" />
          </div>
        </div>
        <div class="field">
          <label for="partitionDetail">상세 설명(선택)</label>
          <textarea id="partitionDetail" placeholder="예: 젠다이/선반 포함, 높이/길이 희망 등"></textarea>
        </div>
      </div>

      <div class="seg">
        <h3>제품별 정보 + 사진 동일 체크</h3>
        <p class="tiny">각 항목에 <b>‘사진 동일’</b> 체크 후, 필요하면 추가설명을 적어주세요.</p>

        <div class="grid2">
          <div class="seg">
            <h3 style="margin:0 0 8px">타일</h3>
            <label class="pill"><input type="checkbox" id="tileSame">사진 동일</label>
            <div class="field"><label for="tileNote">추가설명(선택)</label><input id="tileNote" placeholder="예: 600×1200, 벽/바닥 동일 등" /></div>
          </div>

          <div class="seg">
            <h3 style="margin:0 0 8px">세면대/세면기</h3>
            <label class="pill"><input type="checkbox" id="sinkSame">사진 동일</label>
            <div class="field"><label for="sinkNote">추가설명(선택)</label><input id="sinkNote" placeholder="예: 탑볼, 하부장 포함 등" /></div>
          </div>

          <div class="seg">
            <h3 style="margin:0 0 8px">양변기</h3>
            <label class="pill"><input type="checkbox" id="toiletSame">사진 동일</label>
            <div class="field"><label for="toiletNote">추가설명(선택)</label><input id="toiletNote" placeholder="예: 원피스, 무광 버튼 등" /></div>
          </div>

          <div class="seg">
            <h3 style="margin:0 0 8px">욕실장</h3>
            <label class="pill"><input type="checkbox" id="vanitySame">사진 동일</label>
            <div class="field"><label for="vanityNote">추가설명(선택)</label><input id="vanityNote" placeholder="예: 벽 끝까지, 길이 1200 등" /></div>
          </div>

          <div class="seg">
            <h3 style="margin:0 0 8px">거울</h3>
            <label class="pill"><input type="checkbox" id="mirrorSame">사진 동일</label>
            <div class="field"><label for="mirrorNote">추가설명(선택)</label><input id="mirrorNote" placeholder="예: 하프형, LED 추가 등" /></div>
          </div>

          <div class="seg">
            <h3 style="margin:0 0 8px">수전</h3>
            <label class="pill"><input type="checkbox" id="faucetSame">사진 동일</label>
            <div class="field"><label for="faucetNote">추가설명(선택)</label><input id="faucetNote" placeholder="예: 무광 니켈, 샤워바 포함 등" /></div>
          </div>
        </div>

        <div class="field">
          <label for="accessoryNote">악세사리(선택)</label>
          <input id="accessoryNote" placeholder="예: 매립휴지걸이/수건걸이/옷걸이 등(사진 있으면 함께)" />
        </div>
      </div>

      <div class="seg">
        <h3>첨부파일(선택)</h3>
        <p class="tiny">여기서 파일 선택은 <b>파일 이름 확인용</b>입니다. 실제 파일은 카톡으로 보내주세요. (모바일/브라우저마다 업로드 제한이 있어요)</p>
        <div class="field">
          <label for="files">사진/도면 파일 선택</label>
          <input id="files" type="file" multiple accept="image/*,.pdf" />
          <p class="tiny" id="fileList"></p>
        </div>
      </div>

      <div class="stickyBar">
        <button id="copyKakao" class="primary" type="button">요약 복사 + 카톡 열기</button>
        <button id="togglePreview" class="secondary" type="button">요약 보기</button>
      </div>

      <div class="preview" id="previewBox" hidden>
        <div class="titleRow">
          <b>요약(카톡에 붙여넣기)</b>
          <button class="chip" type="button" id="copyOnly">요약만 복사</button>
        </div>
        <pre id="summary"></pre>
        <p class="tiny">※ 복사가 막히면 위 내용을 길게 눌러 직접 복사한 뒤 카톡에 붙여넣어 주세요.</p>
      </div>
    </section>

  </main>

  <script>
    (function() {
      const KAKAO_URL = "http://pf.kakao.com/_Yurxbn/chat";
      const $ = (id) => document.getElementById(id);

      const ack = $("ack");
      const toggleNotice = $("toggleNotice");
      const noticeBox = $("noticeBox");

      const copyKakao = $("copyKakao");
      const togglePreview = $("togglePreview");
      const previewBox = $("previewBox");
      const summaryEl = $("summary");
      const copyOnly = $("copyOnly");

      const files = $("files");
      const fileList = $("fileList");

      function val(id) {
        const el = $(id);
        if (!el) return "";
        return (el.value || "").trim();
      }

      function checked(id) {
        const el = $(id);
        return !!(el && el.checked);
      }

      function radioVal(name) {
        const el = document.querySelector('input[name="' + name + '"]:checked');
        return el ? el.value : "";
      }

      function layoutLine() {
        const parts = [];
        const s = radioVal("sinkPos");
        const t = radioVal("toiletPos");
        const w = radioVal("showerWhere");
        const st = val("showerType");

        if (s) parts.push(s + " 세면대");
        if (t) parts.push(t + " 변기");

        if (st === "없음") {
          parts.push("샤워/욕조 없음");
        } else if (st) {
          const where = w ? (w + " ") : "";
          parts.push(where + st);
        }
        return parts.join(" / ");
      }

      function productLine(label, sameId, noteId) {
        const same = checked(sameId) ? "사진 동일" : "사진 참고";
        const note = val(noteId);
        return label + ": " + same + (note ? (" / " + note) : "");
      }

      function filesLine() {
        if (!files || !files.files || files.files.length === 0) return "";
        const names = Array.from(files.files).map(f => f.name);
        return names.join(", ");
      }

      function summaryText() {
        const lines = [];
        lines.push("3D 욕실 시안 요청드립니다.");
        lines.push("");
        lines.push("=== 기본 정보 ===");
        if (val("clientType")) lines.push("접수자: " + val("clientType"));
        if (val("siteName")) lines.push("현장명: " + val("siteName"));
        if (val("name")) lines.push("성함: " + val("name"));
        if (val("phone")) lines.push("연락처: " + val("phone"));

        lines.push("");
        lines.push("=== 치수 ===");
        if (val("w")) lines.push("가로(mm): " + val("w"));
        if (val("d")) lines.push("세로(mm): " + val("d"));
        if (val("h")) lines.push("천장 높이(mm): " + val("h"));

        lines.push("");
        lines.push("=== 배치 ===");
        const lay = layoutLine();
        if (lay) lines.push("배치: " + lay);
        if (val("sinkPosNote")) lines.push("세면대 추가설명: " + val("sinkPosNote"));
        if (val("toiletPosNote")) lines.push("변기 추가설명: " + val("toiletPosNote"));
        if (val("showerNote")) lines.push("샤워/욕조 추가설명: " + val("showerNote"));
        if (val("doorPos")) lines.push("문 위치: " + val("doorPos"));
        if (val("layoutNote")) lines.push("배치 전체 설명: " + val("layoutNote"));

        lines.push("");
        lines.push("=== 조적벽/파티션 ===");
        if (val("partitionType")) lines.push("종류: " + val("partitionType"));
        if (val("partitionWhere")) lines.push("위치: " + val("partitionWhere"));
        if (val("partitionDetail")) lines.push("상세: " + val("partitionDetail"));

        lines.push("");
        lines.push("=== 제품(사진 기준) ===");
        lines.push(productLine("타일", "tileSame", "tileNote"));
        lines.push(productLine("세면대/세면기", "sinkSame", "sinkNote"));
        lines.push(productLine("양변기", "toiletSame", "toiletNote"));
        lines.push(productLine("욕실장", "vanitySame", "vanityNote"));
        lines.push(productLine("거울", "mirrorSame", "mirrorNote"));
        lines.push(productLine("수전", "faucetSame", "faucetNote"));
        if (val("accessoryNote")) lines.push("악세사리: " + val("accessoryNote"));

        const fl = filesLine();
        if (fl) {
          lines.push("");
          lines.push("=== 선택한 파일(참고) ===");
          lines.push(fl);
        }

        lines.push("");
        lines.push("[3D 시안 제작 안내]");
        lines.push("- 3D 시안은 실제 시공 가능한 구조/비례를 기준으로 제작됩니다.");
        lines.push("- 제조사·각도·조명·질감 차이로 실물과 100% 동일 표현은 불가합니다.");
        lines.push("- 디자인/컬러톤/배치/분위기 참고용이며, 최종 결과는 현장 조건에 따라 달라질 수 있습니다.");

        return lines.join("\n");
      }

      async function copyText(text) {
        try {
          await navigator.clipboard.writeText(text);
          return true;
        } catch (e) {
          try {
            const ta = document.createElement("textarea");
            ta.value = text;
            ta.style.position = "fixed";
            ta.style.left = "-9999px";
            document.body.appendChild(ta);
            ta.focus(); ta.select();
            const ok = document.execCommand("copy");
            document.body.removeChild(ta);
            return ok;
          } catch (_) {
            return false;
          }
        }
      }

      function refresh() {
        if (summaryEl) summaryEl.textContent = summaryText();
        if (fileList) {
          const fl = filesLine();
          fileList.textContent = fl ? ("선택됨: " + fl) : "";
        }
      }

      toggleNotice.addEventListener("click", () => {
        const hidden = noticeBox.style.display === "none";
        noticeBox.style.display = hidden ? "block" : "none";
        toggleNotice.textContent = hidden ? "접기" : "펼치기";
        toggleNotice.setAttribute("aria-expanded", String(hidden));
      });

      togglePreview.addEventListener("click", () => {
        previewBox.hidden = !previewBox.hidden;
        if (!previewBox.hidden) previewBox.scrollIntoView({ behavior: "smooth", block: "start" });
      });

      copyOnly.addEventListener("click", async () => {
        const text = summaryText();
        const ok = await copyText(text);
        copyOnly.textContent = ok ? "복사 완료!" : "복사 실패";
        setTimeout(() => copyOnly.textContent = "요약만 복사", 1200);
        if (!ok) alert("복사가 제한된 환경입니다. 요약 내용을 길게 눌러 직접 복사해 주세요.");
      });

      copyKakao.addEventListener("click", async () => {
        if (!ack.checked) {
          alert("안내사항 확인 체크 후 진행해 주세요.");
          return;
        }
        const text = summaryText();
        const ok = await copyText(text);
        setTimeout(() => { window.location.href = KAKAO_URL; }, 200);

        if (!ok) {
          alert("자동 복사가 제한되었습니다.\n요약 보기에서 내용을 직접 복사한 뒤 카톡에 붙여넣어 주세요.");
          previewBox.hidden = false;
          previewBox.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      });

      document.addEventListener("input", refresh);
      document.addEventListener("change", refresh);
      refresh();
    })();
  </script>
</body>
</html>
